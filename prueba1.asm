.ORIG x3000
LD R0, zeros
LD R1, roja ;blanco
LD R2, negro
LD R3, rojo
LD R4, negro

ESPERALETRA
	LDI R5,WAITKB	
	BRzp ESPERALETRA


LDI R2,                                               
LD R3, letraDneg
ADD R2 ,R2, R3
BRz DERECHA
LD R3, letraDpos
ADD R2 ,R2, R3
LD R3, letraAneg
ADD R2 ,R2, R3
BRz IZQUIERDA
LD R3, letraApos
ADD R2 ,R2, R3
LD R3, letraSneg
ADD R2 ,R2, R3
BRz ABAJO
LD R3, letraSpos
ADD R2 ,R2, R3
LD R3, letraWneg
ADD R2 ,R2, R3
BRz ARRIBA
BRnzp ESPERALETRA

;STR R3, R4, #0
AUTO
ST R0,GUARDAR_R0	
ST R2,GUARDAR_R2
ST R3,GUARDAR_R3
LD R2, abajo
LD R3, cinco
LOOP
STR R1, R0, #0
STR R1, R0, #1
STR R1, R0, #2
STR R1, R0, #3
STR R1, R0, #4
ADD R0,R0,R2
ADD R3,R3,#-1
BRp LOOP
LD R0,GUARDAR_R0
LD R2,GUARDAR_R2
LD R3,GUARDAR_R3
BRnzp ESPERALETRA


DERECHA	
ST R0,GUARDAR_R0
ST R2,GUARDAR_R2
ST R3,GUARDAR_R3
LD R2, abajo
LD R3, cinco
LOOP1
STR R4, R0, #0
ADD R0,R0,R2
ADD R3,R3,#-1
BRp LOOP1
LD R0,GUARDAR_R0
LD R2,GUARDAR_R2
LD R3,GUARDAR_R3
ADD R0, R0, #1
BRnzp AUTO


IZQUIERDA
ST R0,GUARDAR_R0
ST R2,GUARDAR_R2
ST R3,GUARDAR_R3
ADD	R0,	R0,	#4
LD R2, abajo
LD R3, cinco
LOOP2
STR R4, R0, #0
ADD R0,R0,R2
ADD R3,R3,#-1
BRp LOOP2
LD R0,GUARDAR_R0
LD R2,GUARDAR_R2
LD R3,GUARDAR_R3
ADD R0, R0, #-1
BRnzp AUTO


ABAJO
ST R0,GUARDAR_R0
ST R2,GUARDAR_R2
ST R3,GUARDAR_R3
LD R2, abajo
LD R3, cinco
LOOP3
STR R4, R0, #0
ADD R0, R0, #1
ADD R3,R3,#-1
BRp LOOP3
LD R0,GUARDAR_R0
ADD R0,R0,R2
LD R2,GUARDAR_R2
LD R3,GUARDAR_R3
BRnzp AUTO

ARRIBA
ST R0,GUARDAR_R0
ST R2,GUARDAR_R2
ST R3,GUARDAR_R3
ST R5,GUARDAR_R5
LD R2, abajo
LD R3, cinco
LD R5, arriba
ADD R3,R3,#-1
LOOP4
ADD R0, R0, R2
ADD R3,R3,#-1
BRp LOOP4
LD R3, cinco
LOOP4alt
STR R4, R0, #0
ADD R0, R0, #1
ADD R3,R3,#-1
BRp LOOP4alt
LD R0,GUARDAR_R0
ADD R0,R0,R5
LD R2,GUARDAR_R2
LD R3,GUARDAR_R3
LD R5,GUARDAR_R5
BRnzp AUTO


HALT
cinco .FILL #5
abajo .FILL x80
arriba .FILL x-80
roja .FILL x7FFF ;es blanco
negro .FILL x0000
azul .FILL x001F
rojo .FILL x7FFF
zeros .FILL xC000
count .FILL #256
TECLADO .FILL xFE02
letraDneg .FILL #-100
letraDpos .FILL #100
letraAneg .FILL #-97
letraApos .FILL #97
letraSneg .FILL #-115
letraSpos .FILL #115
letraWneg .FILL #-119
letraWpos .FILL #119
WAITKB	.FILL xFE00	

GUARDAR_R0      .BLKW 1
GUARDAR_R1      .BLKW 1
GUARDAR_R2      .BLKW 1
GUARDAR_R3      .BLKW 1
GUARDAR_R5      .BLKW 1
